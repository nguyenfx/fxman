    <!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <style>
      .styled-table {
          border-collapse: collapse;
          margin: 10px 0;
          font-size: 0.8em;
          font-family: sans-serif;
          min-width: 800px;
          max-width: 800px;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      .styled-table thead tr {
          background-color: #009879;
          color: #ffffff;
          text-align: left;
      }
      .styled-table th,
      .styled-table td {
          padding: 5px 7px;
      }
      .styled-table tbody tr {
          border-bottom: 1px solid #dddddd;
      }

      .styled-table tbody tr:nth-of-type(even) {
          background-color: #f3f3f3;
      }

      .styled-table tbody tr:last-of-type {
          border-bottom: 2px solid #009879;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Statistics</title>
  </head>
  <body>
  <h2>Accounts</h2>
    <table id="accounts" class="styled-table">
      <thead>
        <tr>
          <td>Number</td>
          <td>Name</td>
          <td>Broker</td>
          <td>Server</td>
          <td>Deposit</td>
          <td>Credit</td>
          <td>Withdraw</td>
          <td>Balance</td>
          <td>Equity</td>
          <td>Margin</td>
          <td>Deals</td>
          <td>N.Volume</td>
          <td>N.Profit</td>
          <td>Positions</td>
          <td>F.Volume</td>
          <td>F.Profit</td>
          <td>D.Load</td>
          <td>Drawdown</td>
          <td>Last updated</td>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  <h2>Positions</h2>
    <table id="positions" class="styled-table">
      <thead>
        <tr>
          <td>Ticket</td>
          <td>A.Number</td>
          <td>Open time</td>
          <td>Symbol</td>
          <td>Type</td>
          <td>Volume</td>
          <td>Price</td>
          <td>SL</td>
          <td>TP</td>
          <td>Commission</td>
          <td>Swap</td>
          <td>Profit</td>
          <td>Magic</td>
          <td>Comment</td>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  <h2>Deals</h2>
    <table id="deals" class="styled-table">
      <thead>
        <tr>
          <td>Ticket</td>
          <td>A.Number</td>
          <td>Closed time</td>
          <td>Symbol</td>
          <td>Type</td>
          <td>Volume</td>
          <td>Price</td>
          <td>SL</td>
          <td>TP</td>
          <td>Commission</td>
          <td>Swap</td>
          <td>Profit</td>
          <td>Magic</td>
          <td>Comment</td>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

  <script>

function load(name) {
    var xhr  = new XMLHttpRequest()
    xhr.open('GET', "http://45.32.116.92/fxman/" + name, true)
    xhr.onload = function () {
        if (xhr.readyState == 4 && xhr.status == "200") {
            var data = JSON.parse(xhr.responseText);
            var tbody = document.getElementById(name).getElementsByTagName('tbody')[0];
            while (tbody.firstChild) {
                tbody.firstChild.remove();
            }
            for (i = data.length - 1; i >= 0 ; i--) {
                var row = tbody.insertRow(0);
                for (j = data[i].length - 1; j >= 0; j--) {
                    var cell = row.insertCell(0);
                    cell.innerHTML = data[i][j];
                }
                if(name == "accounts") {
                    var accountid = data[i][0];
                    var row1 = tbody.insertRow(1);
                    row1.innerHTML += '<td colspan=15><canvas id="profit' + accountid + '" width="600" height="100"></canvas></td><td colspan=4><canvas id="symbol' + accountid + '" width="200" height="100"></canvas></td>';
                    var xhr1  = new XMLHttpRequest()
                    xhr1.open('GET', 'http://45.32.116.92/fxman/dailyprofits?number=' + accountid, true)
                    xhr1.onload = function () {
                        if (xhr1.readyState == 4 && xhr1.status == "200") {
                            var profits = JSON.parse(xhr1.responseText);
                            if(window.chart instanceof Chart) {
                                window.chart.destroy();
                            }
                            const chart = new Chart('profit' + accountid, {
                                type: 'bar',
                                data: {
                                    datasets: [{
                                        data: transformArrayOfArrays(profits, 'x', 'y')
                                    }]
                                },
                            });
                        }
                    }
                    xhr1.send(null);
                }
            }
        } else {
            console.error(users);
        }
    }
    xhr.send(null);
}

function loads() {
  load("accounts");
  load("positions");
  load("deals");
}

loads();
setInterval(loads, 60000);

function transformArrayOfArrays(source, ...names) {
  const defaultName = i => "field" + i;
  return source.map(a => {
     return a.reduce((r, v, i) => {
       r[i < names.length ? names[i] : defaultName(i)] = v;
       return r;
     }, {});
  });
}

    </script>
  </body>
</html>